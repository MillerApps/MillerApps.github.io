{{ define "main" }}
<article class="post post--toolbox">
  {{ $user := (default "user" $.Site.Params.owner) | lower }}
  {{ $host := "rabbit-hole" }}
  {{ $path := "~/toolbox" }}
  <div class="post-prompt">
    <div class="prompt-line prompt-line--top">
      <span class="prompt-lead prompt-lead--top">╭─</span>
      <span class="prompt-left">{{ $user }}@{{ $host }}:{{ $path }}</span>
      {{- if .Date -}}
        <span class="prompt-fill" aria-hidden="true"></span>
        <span class="prompt-right">
          <span class="prompt-label">at</span>
          <span class="prompt-value">{{- partial "post-date" . -}}</span>
        </span>
      {{- end -}}
    </div>
    <div class="prompt-line prompt-line--lead">
      <span class="prompt-lead">╰─❯</span>
      <span class="prompt-command">
        <span class="prompt-command__verb">ls</span>
        <span class="prompt-command__args">-la</span>
        <span class="prompt-command__file">~/toolbox/</span>
        <span class="prompt-cursor" aria-hidden="true">▊</span>
      </span>
    </div>
  </div>
  {{ $entries := .Params.ls }}
  <div class="ls-output" role="table">
    <div class="ls-header">total {{ len $entries }}</div>
    {{ range $entries }}
      {{ $name := .name }}
      {{ $suffix := "" }}
      {{ if eq .kind "dir" }}
        {{ if and (ne $name ".") (ne $name "..") }}
          {{ $suffix = "/" }}
        {{ end }}
      {{ end }}
      <div class="ls-line ls-line--{{ .kind }}" role="row">
        <span class="ls-perm" role="cell">{{ .perm }}</span>
        <span class="ls-links" role="cell">{{ .links }}</span>
        <span class="ls-user" role="cell">{{ .user }}</span>
        <span class="ls-group" role="cell">{{ .group }}</span>
        <span class="ls-size" role="cell">{{ .size }}</span>
        <span class="ls-date" role="cell">{{ .date }}</span>
        <span class="ls-name" role="cell">
          {{ $name }}{{ $suffix }}{{ if .target }} <span class="ls-arrow">-&gt;</span> <span class="ls-target">{{ .target }}</span>{{ end }}
        </span>
      </div>
    {{ end }}
  </div>
</article>
{{ end }}
